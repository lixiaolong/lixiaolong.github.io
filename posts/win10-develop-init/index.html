<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>win10 develop init :: Raindrop</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="win10 develop init 制作 win10 U 盘启动盘  访问链接 https://www.microsoft.com/zh-cn/software-download/windows10 选择 立即下载工具, 得到 U 盘制作工具 MediaCreationTool20H2.exe 插入 U 盘，大小至少 8G ，清理文件，然后运行 U 盘制作工具，按照提示一步步往下即可  安装 win10 系统  备份重要文件，最好有个移动硬盘，将重要的资料备份，因为下面要全新安装 win10 ，所以电脑上的文件会全部清空 重启电脑，启动过程中进入 BIOS ，进入方式通常是启动过程中按 DEL ，ESC 等按键，不同电脑可能不一样 进入 BIOS 后，按照界面上提示的按键进行菜单切换，找到 BOOT 相关的设置，将启动方式设置为 UEFI，将 Secure Boot 暂时关闭 插入 U 盘，按照 BIOS 的提示保存并重启系统，启动过程中进入快速启动项选择，通常是按 F8 或 F11 等按键 选择 UEFI U 盘启动，进入到 windows10 的安装界面 进行分区，将所有分区都删除，这里操作前一定要确认电脑硬盘上已经没有重要数据，而且移动硬盘也没有插在电脑上  新建分区，先新建一个 120G 的分区来装系统，如果硬盘较大，可以分多一点 然后再分配一个 100G 的分区备用，后续用来安装 deepin 系统 将剩余空间全部分配成一个分区，用来做数据分区，也可以按照自己的需求划分其他分区   分区完成后，就可以选择刚才分配的系统分区来安装系统了，后面的操作就是等待并按提示进行，直到 win10 系统安装完成 登录账户推荐微软的账户登录，可以配置同步，系统激活状态也会同步，同时还可以浏览器同步  安装常用软件  压缩软件，推荐 7z，下载链接 https://www." />
<meta name="keywords" content="podman, gcc, cmake3, win10, wsl2" />
<meta name="robots" content="noodp" />
<link rel="canonical" href="/posts/win10-develop-init/" />




<link rel="stylesheet" href="/assets/style.css">

  <link rel="stylesheet" href="/assets/blue.css">






<link rel="apple-touch-icon" href="/img/apple-touch-icon-192x192.png">

  <link rel="shortcut icon" href="/img/favicon/blue.png">



<meta name="twitter:card" content="summary" />

  
    <meta name="twitter:site" content="" />
  
    <meta name="twitter:creator" content="lxl" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="win10 develop init">
<meta property="og:description" content="win10 从安装到开发环境搭建" />
<meta property="og:url" content="/posts/win10-develop-init/" />
<meta property="og:site_name" content="Raindrop" />

  <meta property="og:image" content="/">

<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">


  <meta property="article:published_time" content="2020-12-06 17:26:31 &#43;0800 CST" />












</head>
<body class="blue">


<div class="container full headings--one-size">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    Raindrop
  </div>
</a>

    </div>
    
      <div class="menu-trigger">menu</div>
    
  </div>
  
    <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/about">关于</a></li>
        
      
        
          <li><a href="/start">开始</a></li>
        
      
      
    

    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/about">关于</a></li>
      
    
      
        <li><a href="/start">开始</a></li>
      
    
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<div class="post">
  <h1 class="post-title">
    <a href="/posts/win10-develop-init/">win10 develop init</a></h1>
  <div class="post-meta">
    
      <span class="post-date">
        2020-12-06 
      </span>
    
    
    <span class="post-author">:: lxl</span>
    
  </div>

  
  <span class="post-tags">
    
    #<a href="/tags/%E7%BC%96%E8%AF%91%E7%8E%AF%E5%A2%83/">编译环境</a>&nbsp;
    
    #<a href="/tags/%E5%BC%80%E5%8F%91/">开发</a>&nbsp;
    
    #<a href="/tags/win10/">win10</a>&nbsp;
    
    #<a href="/tags/podman/">podman</a>&nbsp;
    
    #<a href="/tags/wsl2/">wsl2</a>&nbsp;
    
  </span>
  

  

  

  <div class="post-content"><div>
        <h1 id="win10-develop-init">win10 develop init<a href="#win10-develop-init" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<h2 id="制作-win10-u-盘启动盘">制作 win10 U 盘启动盘<a href="#制作-win10-u-盘启动盘" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<ol>
<li>访问链接 <code>https://www.microsoft.com/zh-cn/software-download/windows10</code></li>
<li>选择 <code>立即下载工具</code>, 得到 U 盘制作工具 <code>MediaCreationTool20H2.exe</code></li>
<li>插入 U 盘，大小至少 8G ，清理文件，然后运行 U 盘制作工具，按照提示一步步往下即可</li>
</ol>
<h2 id="安装-win10-系统">安装 win10 系统<a href="#安装-win10-系统" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<ol>
<li>备份重要文件，最好有个移动硬盘，将重要的资料备份，因为下面要全新安装 win10 ，所以电脑上的文件会全部清空</li>
<li>重启电脑，启动过程中进入 BIOS ，进入方式通常是启动过程中按 DEL ，ESC 等按键，不同电脑可能不一样</li>
<li>进入 BIOS 后，按照界面上提示的按键进行菜单切换，找到 BOOT 相关的设置，将启动方式设置为 UEFI，将 Secure Boot 暂时关闭</li>
<li>插入 U 盘，按照 BIOS 的提示保存并重启系统，启动过程中进入快速启动项选择，通常是按 F8 或 F11 等按键</li>
<li>选择 UEFI U 盘启动，进入到 windows10 的安装界面</li>
<li>进行分区，将所有分区都删除，这里操作前一定要确认电脑硬盘上已经没有重要数据，而且移动硬盘也没有插在电脑上
<ol>
<li>新建分区，先新建一个 120G 的分区来装系统，如果硬盘较大，可以分多一点</li>
<li>然后再分配一个 100G 的分区备用，后续用来安装 deepin 系统</li>
<li>将剩余空间全部分配成一个分区，用来做数据分区，也可以按照自己的需求划分其他分区</li>
</ol>
</li>
<li>分区完成后，就可以选择刚才分配的系统分区来安装系统了，后面的操作就是等待并按提示进行，直到 win10 系统安装完成</li>
<li>登录账户推荐微软的账户登录，可以配置同步，系统激活状态也会同步，同时还可以浏览器同步</li>
</ol>
<h2 id="安装常用软件">安装常用软件<a href="#安装常用软件" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<ol>
<li>压缩软件，推荐 7z，下载链接 <code>https://www.7-zip.org/a/7z1900-x64.msi</code>，如果是移动网络，下载会非常缓慢</li>
<li>办公文档，推荐 wps，下载链接 <code>https://www.wps.cn/</code>，选择 <code>WPS Office 2019 PC 版</code>
<ol>
<li>安装完 wps 后，打开，选择右上角齿轮按钮进入 <code>设置 -&gt; 配置和修复工具 -&gt; 高级</code></li>
<li>功能定制：将选项都勾上，就不会有各种在线模板和素材等功能了</li>
<li>其他选项：关闭硬件加速、热点、广告推送，这样可以减少广告</li>
</ol>
</li>
<li>浏览器：自带的 EDGE，开启账户登录并同步配置</li>
</ol>
<h2 id="安装开发软件">安装开发软件<a href="#安装开发软件" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<ol>
<li>命令行：Windows Terminal，直接在商店里搜索安装即可</li>
<li>版本控制软件：git，下载链接 <code>https://git-scm.com/downloads</code>，
<ol>
<li>移动宽带无法从官方下载，所以可以从淘宝镜像下载：<code>https://npm.taobao.org/mirrors/git-for-windows/</code></li>
</ol>
</li>
<li>代码编辑：vscode，下载链接 <code>https://code.visualstudio.com/</code>
<ol>
<li>建议安装完成后左下角开启配置同步，各种插件和配置都可以一次同步</li>
</ol>
</li>
<li>golang：下载 <code>https://golang.google.cn/</code>，安装时可以选择安装到数据盘
<ol>
<li>打开环境变量：开始-&gt; 设置-&gt; 系统-&gt; 关于-&gt; 高级系统设置-&gt; 环境变量</li>
<li>新建一个 GOPATH 的环境变量，路径配置在数据盘，比如 D:\program\gopath\</li>
<li>编辑 Path 环境变量，新建一个路径指向 D:\program\gopath\bin</li>
<li>配置代理，打开一个新终端，执行 <code>go env -w GO111MODULE=on</code>，再执行 <code>go env -w GOPROXY=https://goproxy.io,direct</code></li>
</ol>
</li>
<li>rust: 下载 rust-init <code>https://static.rust-lang.org/rustup/dist/x86_64-pc-windows-gnu/rust-init.exe</code>
<ol>
<li>执行后，按照提示操作，应该会安装到两个目录，<code>C:\Users\user\.rustup</code> <code>C:\Users\user\.cargo</code></li>
<li>将这两个目录剪切到数据盘，比如<code>D:\soft\rust\.rustup</code>和<code>D:\soft\rust\.cargo</code></li>
<li>设置环境变量：新建一个变量，CARGO_HOME，路径为<code>D:\soft\rust\.cargo</code></li>
<li>设置环境变量：新建一个变量，RUSTUP_HOME，路径为<code>D:\soft\rust\.rustup</code></li>
<li>编辑环境变量 Path，新增一个路径<code>D:\soft\rust\.cargo\bin</code></li>
<li>执行<code>cargo version</code>和<code>rustup show</code>查看是否安装好</li>
</ol>
</li>
</ol>
<h2 id="win10-开启-wsl2">win10 开启 wsl2<a href="#win10-开启-wsl2" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<ol>
<li>文档：<code>https://docs.microsoft.com/zh-cn/windows/wsl/install-win10</code></li>
<li>上面文档中讲了通过命令行开启容器和虚拟化特性的方法，其实应该可以图形化开启的
<ol>
<li>打开设置-&gt; 应用-&gt; 可选功能-&gt; 下拉-&gt; 更多 Windows 功能</li>
<li>勾选 <code>适用于 Linux 的 Windows 子系统</code>和<code>虚拟机平台</code></li>
<li>确定后会提示系统重启，重启后，会自动安装相关功能</li>
<li>下载内核补丁包(wsl_update_x64.msi)，在上面的文档有链接<code>http://aka.ms/wsl2kernelmsix64</code>，下载较慢，完成后安装补丁，并重启</li>
<li>执行<code>wsl --set-default-version 2</code>，即可切换默认版本为 wsl2</li>
<li>到商店里面搜索 linux，可以找到 ubuntu、debian、kali、opensuse，但是没有 centos</li>
<li>选择一个系统下载，完成后点击启动，此时会进行首次启动的配置，例如用户名密码</li>
<li>此后无需从商店启动，直接命令行执行 wsl 即可进入，如果有多个系统则需要指定默认</li>
</ol>
</li>
</ol>
<h2 id="子系统-opensuse-配置podman">子系统 OpenSUSE 配置(podman)<a href="#子系统-opensuse-配置podman" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<ol>
<li>
<p>切换国内源</p>
<ol>
<li>首先禁用源 <code>sudo zypper mr -da</code></li>
<li><code>sudo zypper ar -fcg https://mirrors.ustc.edu.cn/opensuse/distribution/leap/15.2/repo/oss USTC:15.2:OSS</code></li>
<li><code>sudo zypper ar -fcg https://mirrors.ustc.edu.cn/opensuse/distribution/leap/15.2/repo/non-oss USTC:15.2:NON-OSS</code></li>
<li><code>sudo zypper ar -fcg https://mirrors.ustc.edu.cn/opensuse/update/leap/15.2/oss USTC:15.2:UPDATE-OSS</code></li>
<li><code>sudo zypper ar -fcg https://mirrors.ustc.edu.cn/opensuse/update/leap/15.2/non-oss USTC:15.2:UPDATE-NON-OSS</code></li>
<li>刷新源 <code>sudo zypper ref</code></li>
</ol>
</li>
<li>
<p>安装容器管理软件，podman，<code>sudo zypper install podman buildah</code></p>
<ol>
<li>切换容器下载的源，备份配置文件<code>/etc/containers/registries.conf</code></li>
<li>将内容替换为</li>
</ol>
<pre><code>unqualified-search-registries = [&quot;docker.io&quot;]

[[registry]]
prefix = &quot;docker.io&quot;
location = &quot;docker.mirrors.ustc.edu.cn&quot;
</code></pre><ol start="3">
<li>下载 centos 容器，<code>podman pull centos:7</code></li>
<li>通过 buildah 创建自己的镜像</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"> <span style="color:#75715e">#!/bin/bash</span>

 id<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>buildah from centos:7<span style="color:#66d9ef">)</span>
 buildah run --net host $id yum -y install epel-release centos-release-scl
 <span style="color:#75715e"># Development Tools</span>
 buildah run --net host $id yum -y install automake binutils bison flex gettext <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span> libtool make patch pkgconfig rpm-build rpm-sign byacc elfutils git indent <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span> patchutils subversion lua rpmlint
 <span style="color:#75715e"># cmake3 and gcc 8</span>
 buildah run --net host $id yum -y install cmake3 devtoolset-8-gcc*
 buildah run --net host $id scl enable devtoolset-8 bash
 buildah run --net host $id ln -s /usr/bin/cmake3 /usr/bin/cmake
 buildah run --net host $id yum -y install rpm-devel openssl-devel <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span> libyaml-devel libcap-ng-devel lz4-devel libpcap-devel nspr-devel nss-devel nss-softokn-devel <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span> file-devel jansson-devel python-devel lua-devel hiredis-devel libuuid-devel libevent-devel <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span> libnet-devel librdkafka-devel ragel sqlite-devel hyperscan-devel

 <span style="color:#75715e"># clean cache</span>
 buildah run --net host $id yum clean all
 buildah commit $id devtool-init
</code></pre></div><ol start="5">
<li>运行编译环境</li>
</ol>
<pre><code>podman run --name devtool -it --rm --net host --events-backend=file -w /build devtool-init
</code></pre></li>
</ol>

      </div></div>

  
  
<div class="pagination">
    <div class="pagination__title">
        <span class="pagination__title-h">阅读其他</span>
        <hr />
    </div>
    <div class="pagination__buttons">
        
        
        <span class="button next">
            <a href="/posts/live-gate/">
                <span class="button__text">生门</span>
                <span class="button__icon">→</span>
            </a>
        </span>
        
    </div>
</div>

  

  

</div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2020 Powered by <a href="http://gohugo.io">Hugo</a></span>
    
        <span>:: Theme made by <a href="https://twitter.com/panr">panr</a></span>
      </div>
  </div>
</footer>

<script src="/assets/main.js"></script>
<script src="/assets/prism.js"></script>







  
</div>

</body>
</html>
